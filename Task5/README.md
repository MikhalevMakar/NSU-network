# SOCKS 5 Прокси-сервер

## Описание задачи

Необходимо реализовать прокси-сервер в соответствии со стандартом SOCKS версии 5.
Прокси должен быть реализован с использованием неблокирующихся сокетов и работать в рамках одного потока. 
Прокси должен поддерживать команду 1 (establish a TCP/IP stream connection).

## Требования

- В параметрах программы передается только порт, на котором прокси будет ждать входящих подключений от клиентов.
- Аутентификация и поддержка IPv6-адресов не требуется.
- Необходимо использовать неблокирующиеся сокеты и работать с ними в рамках одного треда, без использования дополнительных потоков.
- Прокси не должна предполагать, какой протокол уровня приложений будет использоваться внутри перенаправляемого TCP-соединения.
- Должна поддерживаться передача данных одновременно в обе стороны, и соединения должны закрываться аккуратно.
- Не должно быть холостых циклов ни в каких ситуациях. Программа не должна находиться в состоянии, где не происходит фактической передачи данных.
- Расход памяти для обслуживания одного клиента должен быть ограничен.
- Производительность работы через прокси не должна сильно уступать прямому подключению.
- Можно использовать Developer tools браузера на вкладку Network для отслеживания скорости работы.

## Резолвинг доменных имён

- Прокси должен поддерживать резолвинг доменных имен с использованием неблокирующегося подхода.
- Для этого можно использовать UDP-сокет и добавить его в селектор на чтение.
- Когда необходимо отрезолвить доменное имя, отправлять через этот сокет DNS-запрос A-записи на адрес рекурсивного DNS-резолвера.
- Обработчик чтения из сокета должен обрабатывать ответ на DNS-запрос и продолжать работу с полученным адресом.
- Для работы с DNS-сообщениями предлагается использовать библиотеку dnsjava.

## Протокол

- Для описания протокола можно обращаться к [английской Википедии](https://en.wikipedia.org/wiki/SOCKS#SOCKS5).
- Ссылки на [SOCKS 5 RFC](https://tools.ietf.org/html/rfc1928) и [SOCKS для самых маленьких](https://ruseller.com/lessons.php?id=1004).

## Тестирование

- Для тестирования настройте любой веб-браузер на использование вашего прокси.
- Посещайте веб-сайты, богатые контентом, и отслеживайте корректность и скорость работы через Developer tools браузера на вкладку Network.
